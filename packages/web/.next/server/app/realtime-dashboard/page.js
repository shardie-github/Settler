(()=>{var e={};e.id=964,e.ids=[964],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},76551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.Z,__next_app__:()=>x,originalPathname:()=>i,pages:()=>c,routeModule:()=>m,tree:()=>o}),r(37641),r(29101),r(19718),r(31306),r(87824);var a=r(93282),s=r(5736),d=r(61249),l=r(36880),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let o=["",{children:["realtime-dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37641)),"/workspace/packages/web/src/app/realtime-dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,29101)),"/workspace/packages/web/src/app/layout.tsx"],template:[()=>Promise.resolve().then(r.bind(r,19718)),"/workspace/packages/web/src/app/template.tsx"],error:[()=>Promise.resolve().then(r.bind(r,31306)),"/workspace/packages/web/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,87824,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/packages/web/src/app/realtime-dashboard/page.tsx"],i="/realtime-dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/realtime-dashboard/page",pathname:"/realtime-dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},10896:(e,t,r)=>{Promise.resolve().then(r.bind(r,21665))},21665:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(73227),s=r(1133),d=r(66144),l=r(23677);function n({params:e,searchParams:t}){let r=e?.jobId||t?.jobId||"",n=t?.apiKey||"",{connected:o,execution:c,logs:i,errors:x}=function({jobId:e,apiKey:t,enabled:r=!0,onUpdate:a,onError:s}){let[d,n]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[i,x]=(0,l.useState)([]),[m,u]=(0,l.useState)([]),p=(0,l.useRef)(null),b=(0,l.useRef)(null),h=(0,l.useCallback)(e=>{x(t=>[...t.slice(-99),`${new Date().toISOString()}: ${e}`])},[]),g=(0,l.useCallback)(e=>{u(t=>[...t.slice(-49),`${new Date().toISOString()}: ${e}`])},[]),k=(0,l.useCallback)(()=>{p.current&&(p.current.close(),p.current=null),b.current&&(clearTimeout(b.current),b.current=null),n(!1)},[]),j=(0,l.useCallback)(()=>{if(!e||!t||!r)return;k();let d=new EventSource(`/api/v1/realtime/reconciliations/${e}?token=${encodeURIComponent(t)}`);p.current=d,d.onopen=()=>{n(!0),h("Connected to real-time updates")},d.onmessage=e=>{try{let t=JSON.parse(e.data);"connected"===t.type?h("Connection established"):"execution_update"===t.type&&(c(t),h(`Status update: ${t.status}`),a?.(t),t.error&&g(t.error),("completed"===t.status||"failed"===t.status)&&(k(),h("Reconciliation finished. Connection closed.")))}catch(e){console.error("Failed to parse SSE message:",e),g("Failed to parse update message")}},d.onerror=e=>{console.error("SSE error:",e),n(!1),h("Connection error. Attempting to reconnect..."),s?.(e instanceof Error?e:Error("SSE connection error")),b.current=setTimeout(()=>{j()},5e3)}},[e,t,r,h,g,a,s,k]);return{connected:d,execution:o,logs:i,errors:m,reconnect:j,disconnect:k}}({jobId:r,apiKey:n,enabled:!!r&&!!n});return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-black",children:[a.jsx(s.Navigation,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pt-24",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-slate-900 dark:text-white",children:"Reconciliation Dashboard"}),a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${o?"bg-green-500":"bg-red-500"}`}),a.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:o?"Connected":"Disconnected"})]})}),c&&(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 mb-6 border border-slate-200 dark:border-slate-700",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"Execution Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Status:"}),a.jsx("span",{className:`ml-2 font-semibold ${(e=>{switch(e){case"completed":return"text-green-600 dark:text-green-400";case"failed":return"text-red-600 dark:text-red-400";case"running":return"text-blue-600 dark:text-blue-400";default:return"text-slate-600 dark:text-slate-400"}})(c.status)}`,children:c.status?.toUpperCase()})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Duration:"}),a.jsx("span",{className:"ml-2 font-semibold text-slate-900 dark:text-white",children:((e,t)=>{if(!e)return"N/A";let r=new Date(e),a=Math.floor(((t?new Date(t):new Date).getTime()-r.getTime())/1e3);return`${Math.floor(a/60)}m ${a%60}s`})(c.startedAt,c.completedAt)})]}),c.startedAt&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Started:"}),a.jsx("span",{className:"ml-2 text-slate-900 dark:text-white",children:new Date(c.startedAt).toLocaleString()})]}),c.completedAt&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Completed:"}),a.jsx("span",{className:"ml-2 text-slate-900 dark:text-white",children:new Date(c.completedAt).toLocaleString()})]})]}),c.summary&&(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-white",children:"Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded border border-blue-200 dark:border-blue-800",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Source Records"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:c.summary.total_source_records||0})]}),(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded border border-green-200 dark:border-green-800",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Target Records"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:c.summary.total_target_records||0})]}),(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded border border-purple-200 dark:border-purple-800",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Matches"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:c.summary.matched_count||0})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded border border-yellow-200 dark:border-yellow-800",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Unmatched Source"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:c.summary.unmatched_source_count||0})]}),(0,a.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded border border-orange-200 dark:border-orange-800",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Unmatched Target"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:c.summary.unmatched_target_count||0})]}),(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded border border-red-200 dark:border-red-800",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Errors"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:c.summary.errors_count||0})]})]}),null!==c.summary.accuracy_percentage&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Accuracy"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[c.summary.accuracy_percentage?.toFixed(2),"%"]})]})]})]}),x.length>0&&(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-300 mb-2",children:"Errors"}),a.jsx("div",{className:"max-h-48 overflow-y-auto",children:x.map((e,t)=>a.jsx("div",{className:"text-sm text-red-700 dark:text-red-400 mb-1",children:e},t))})]}),(0,a.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-900 dark:text-white",children:"Activity Log"}),a.jsx("div",{className:"max-h-64 overflow-y-auto font-mono text-sm text-slate-700 dark:text-slate-300",children:i.map((e,t)=>a.jsx("div",{className:"mb-1",children:e},t))})]})]}),a.jsx(d.$,{})]})}},37641:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(53189).createProxy)(String.raw`/workspace/packages/web/src/app/realtime-dashboard/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[522,631,568,10,56],()=>r(76551));module.exports=a})();