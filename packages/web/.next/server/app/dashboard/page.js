"use strict";(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4873:(e,t,s)=>{s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(37992),s(91723),s(87824);var a=s(93282),r=s(5736),l=s(93906),i=s.n(l),n=s(36880),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,37992)),"/workspace/packages/web/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,91723)),"/workspace/packages/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,87824,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/packages/web/src/app/dashboard/page.tsx"],x="/dashboard/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},37992:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y,dynamic:()=>f});var a=s(99013),r=s(82638),l=s(76321),i=s(47755);let n=(0,i.Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),d=(0,i.Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),o=(0,i.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),c=(0,i.Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),x=(0,i.Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),h=(0,i.Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),m=(0,i.Z)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),p=(0,i.Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);async function g(e="shardie-github",t="Settler-API"){try{let s=await fetch(`https://api.github.com/repos/${e}/${t}`,{headers:{Accept:"application/vnd.github.v3+json"},next:{revalidate:3600}});if(!s.ok)throw Error(`GitHub API error: ${s.status}`);let a=await s.json();return{stars:a.stargazers_count||0,forks:a.forks_count||0,watchers:a.watchers_count||0,openIssues:a.open_issues_count||0,lastUpdated:a.updated_at||new Date().toISOString()}}catch(e){return console.warn("GitHub API unavailable, using demo data:",e),{stars:42,forks:8,watchers:12,openIssues:3,lastUpdated:new Date().toISOString()}}}async function u(e="@settler/sdk"){try{let t=await fetch(`https://registry.npmjs.org/${e}`,{next:{revalidate:3600}});if(!t.ok)throw Error(`NPM API error: ${t.status}`);let s=await t.json(),a=s["dist-tags"]?.latest||"0.0.0",r=s.time?.modified||new Date().toISOString();return{downloads:s.downloads?.length||0,version:a,lastUpdated:r}}catch(e){return console.warn("NPM API unavailable, using demo data:",e),{downloads:1250,version:"1.0.0",lastUpdated:new Date().toISOString()}}}async function b(){let[e,t]=await Promise.all([g(),u()]);return{github:e,npm:t,timestamp:new Date().toISOString()}}var w=s(44758),k=s(47550);let f="force-dynamic";async function j(){try{let e;let t=await (0,r.e)();try{e=await b()}catch(t){console.warn("Failed to fetch external metrics:",t),e={github:{stars:0,forks:0,watchers:0,openIssues:0,lastUpdated:new Date().toISOString()},npm:{downloads:0,version:"0.0.0",lastUpdated:new Date().toISOString()},timestamp:new Date().toISOString()}}let s=null;try{let e=await t.rpc("get_kpi_health_status").single();e.data&&(s=e.data),e.error&&console.warn("RPC function error:",e.error)}catch(e){console.warn("RPC function not available, using fallback queries:",e)}let l=0;try{let{count:e}=await t.from("activity_log").select("*",{count:"exact",head:!0}).gte("created_at",new Date(Date.now()-36e5).toISOString());l=e||0}catch(e){console.warn("Error fetching activity count:",e)}let i=0;try{let{count:e}=await t.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",new Date(Date.now()-6048e5).toISOString());i=e||0}catch(e){console.warn("Error fetching new users count:",e)}let g=null;try{let{data:e}=await t.from("posts").select("id, title, views, upvotes").eq("status","published").gte("created_at",new Date().toISOString().split("T")[0]).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){let t=e[0];t&&(g=e.reduce((e,t)=>{let s=(t.views||0)+2*(t.upvotes||0),a=(e.views||0)+2*(e.upvotes||0);return s>a?t:e},t))}}catch(e){console.warn("Error fetching posts:",e)}let u=0;try{let{count:e}=await t.from("posts").select("*",{count:"exact",head:!0}).eq("status","published");u=e||0}catch(e){console.warn("Error fetching total posts:",e)}let f=0;try{let{count:e}=await t.from("profiles").select("*",{count:"exact",head:!0});f=e||0}catch(e){console.warn("Error fetching total profiles:",e)}let j={newUsersWeek:i,actionsLastHour:l,topPostEngagement:g?(g.views||0)+2*(g.upvotes||0):0,topPostTitle:g?.title||"No posts today yet",totalPosts:u,totalProfiles:f,allCylindersFiring:s?.all_cylinders_firing??!1};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-black",children:[a.jsx(w.W,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pt-24",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 dark:from-electric-cyan dark:via-electric-purple dark:to-electric-blue bg-clip-text text-transparent",children:"Ecosystem Dashboard"}),a.jsx("p",{className:"text-xl text-slate-700 dark:text-slate-300",children:"Real-time metrics from our living system"})]}),a.jsx("div",{className:"mb-8 text-center",children:a.jsx("div",{className:`inline-flex items-center gap-2 px-6 py-3 rounded-full text-lg font-semibold ${j.allCylindersFiring?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border-2 border-green-500":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 border-2 border-yellow-500"}`,children:j.allCylindersFiring?(0,a.jsxs)(a.Fragment,{children:[a.jsx(n,{className:"w-5 h-5"}),"Status: Loud and High ✓"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(d,{className:"w-5 h-5"}),"Status: Building Momentum"]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[a.jsx(v,{icon:o,title:"New Users This Week",value:j.newUsersWeek,threshold:50,description:"Community members who joined in the last 7 days",passed:j.newUsersWeek>50}),a.jsx(v,{icon:c,title:"Actions Last Hour",value:j.actionsLastHour,threshold:100,description:"User interactions tracked in the past hour",passed:j.actionsLastHour>100}),a.jsx(v,{icon:x,title:"Top Post Engagement",value:j.topPostEngagement,threshold:100,description:"Most engaged post today (views + upvotes)",passed:j.topPostEngagement>100})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 border border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(h,{className:"w-6 h-6 text-blue-600 dark:text-electric-cyan"}),a.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Total Published Posts"})]}),a.jsx("p",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:j.totalPosts}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Community content across all categories"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 border border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(o,{className:"w-6 h-6 text-indigo-600 dark:text-electric-purple"}),a.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Total Community Members"})]}),a.jsx("p",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:j.totalProfiles}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Active profiles in the ecosystem"})]})]}),g&&(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 border border-slate-200 dark:border-slate-700 mb-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"Most Engaged Post Today"}),a.jsx("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-2",children:g.title}),(0,a.jsxs)("div",{className:"flex gap-6 text-sm text-slate-600 dark:text-slate-400",children:[(0,a.jsxs)("span",{children:[g.views||0," views"]}),(0,a.jsxs)("span",{children:[g.upvotes||0," upvotes"]}),(0,a.jsxs)("span",{className:"font-semibold",children:[j.topPostEngagement," total engagement"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 border border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(m,{className:"w-6 h-6 text-slate-700 dark:text-slate-300"}),a.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"GitHub Repository"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Stars"}),a.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.github.stars.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Forks"}),a.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.github.forks.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Open Issues"}),a.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.github.openIssues.toLocaleString()})]})]}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-4",children:"Data from GitHub API (with demo fallback if unavailable)"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 border border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(p,{className:"w-6 h-6 text-slate-700 dark:text-slate-300"}),a.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"NPM Package"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Version"}),a.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.npm.version})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Downloads"}),a.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.npm.downloads.toLocaleString()})]})]}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-4",children:"Data from NPM Registry API (with demo fallback if unavailable)"})]})]})]}),a.jsx(k.$,{})]})}catch(e){return console.error("Error in DashboardMetrics:",e),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:"Error loading dashboard metrics"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Please try refreshing the page"})]})})}}function v({icon:e,title:t,value:s,threshold:r,description:l,passed:i}){return(0,a.jsxs)("div",{className:`bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 border-2 ${i?"border-green-500 dark:border-green-400":"border-slate-200 dark:border-slate-700"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(e,{className:`w-6 h-6 ${i?"text-green-600 dark:text-green-400":"text-slate-600 dark:text-slate-400"}`}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:t})]}),a.jsx("p",{className:`text-4xl font-bold mb-2 ${i?"text-green-600 dark:text-green-400":"text-slate-900 dark:text-white"}`,children:s.toLocaleString()}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:l}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${i?"bg-green-500":"bg-yellow-500"}`}),(0,a.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Target: ",r.toLocaleString()," ",i?"✓":"(in progress)"]})]})]})}function y(){return a.jsx(l.Suspense,{fallback:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-black",children:[a.jsx(w.W,{}),a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-electric-cyan mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading dashboard metrics..."})]})}),a.jsx(k.$,{})]}),children:a.jsx(j,{})})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[522,313,606,920,640,588],()=>s(4873));module.exports=a})();