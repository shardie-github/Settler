(()=>{var e={};e.id=312,e.ids=[312],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},91360:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.Z,__next_app__:()=>u,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(96050),r(29101),r(19718),r(31306),r(87824);var n=r(93282),i=r(5736),a=r(61249),s=r(36880),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let l=["",{children:["react-settler-demo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,96050)),"/workspace/packages/web/src/app/react-settler-demo/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,29101)),"/workspace/packages/web/src/app/layout.tsx"],template:[()=>Promise.resolve().then(r.bind(r,19718)),"/workspace/packages/web/src/app/template.tsx"],error:[()=>Promise.resolve().then(r.bind(r,31306)),"/workspace/packages/web/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,87824,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/packages/web/src/app/react-settler-demo/page.tsx"],d="/react-settler-demo/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/react-settler-demo/page",pathname:"/react-settler-demo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},85024:(e,t,r)=>{Promise.resolve().then(r.bind(r,51078))},72578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(24583).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},36520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationError=t.CompilationError=t.SecurityError=t.ValidationError=t.ReconciliationError=void 0;class r extends Error{constructor(e,t,r,n){super(e),this.name="ReconciliationError",this.code=t,this.statusCode=r,this.details=n,this.timestamp=new Date().toISOString(),Error.captureStackTrace(this,this.constructor)}}t.ReconciliationError=r;class n extends r{constructor(e,t,r,n){super(e,"VALIDATION_ERROR",400,n),this.name="ValidationError",this.field=t,this.value=r}}t.ValidationError=n;class i extends r{constructor(e,t){super(e,"SECURITY_ERROR",403,t),this.name="SecurityError"}}t.SecurityError=i;class a extends r{constructor(e,t,r,n,i){super(e,"COMPILATION_ERROR",500,i),this.name="CompilationError",this.component=t,this.line=r,this.column=n}}t.CompilationError=a;class s extends r{constructor(e,t,r){super(e,"CONFIGURATION_ERROR",500,r),this.name="ConfigurationError",this.configPath=t}}t.ConfigurationError=s},27783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=t.generateSecureId=t.maskPII=t.validateTransactionId=t.sanitizeTransactionMetadata=t.formatMoney=t.isValidMoney=t.isValidCurrency=t.isValidISODate=t.sanitizeString=t.ConfigurationError=t.CompilationError=t.SecurityError=t.ProtocolValidationError=t.ReconciliationError=void 0;var n=r(36520);Object.defineProperty(t,"ReconciliationError",{enumerable:!0,get:function(){return n.ReconciliationError}}),Object.defineProperty(t,"ProtocolValidationError",{enumerable:!0,get:function(){return n.ValidationError}}),Object.defineProperty(t,"SecurityError",{enumerable:!0,get:function(){return n.SecurityError}}),Object.defineProperty(t,"CompilationError",{enumerable:!0,get:function(){return n.CompilationError}}),Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return n.ConfigurationError}});var i=r(47716);Object.defineProperty(t,"sanitizeString",{enumerable:!0,get:function(){return i.sanitizeString}}),Object.defineProperty(t,"isValidISODate",{enumerable:!0,get:function(){return i.isValidISODate}}),Object.defineProperty(t,"isValidCurrency",{enumerable:!0,get:function(){return i.isValidCurrency}}),Object.defineProperty(t,"isValidMoney",{enumerable:!0,get:function(){return i.isValidMoney}}),Object.defineProperty(t,"formatMoney",{enumerable:!0,get:function(){return i.formatMoney}}),Object.defineProperty(t,"sanitizeTransactionMetadata",{enumerable:!0,get:function(){return i.sanitizeTransactionMetadata}}),Object.defineProperty(t,"validateTransactionId",{enumerable:!0,get:function(){return i.validateTransactionId}}),Object.defineProperty(t,"maskPII",{enumerable:!0,get:function(){return i.maskPII}}),Object.defineProperty(t,"generateSecureId",{enumerable:!0,get:function(){return i.generateSecureId}}),Object.defineProperty(t,"deepClone",{enumerable:!0,get:function(){return i.deepClone}})},47716:(e,t)=>{"use strict";function r(e){return"string"!=typeof e?"":e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}function n(e){return!!e&&"string"==typeof e&&/^[A-Z]{3}$/.test(e)}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.value||isNaN(e.value)||!isFinite(e.value))&&!(e.value<0)&&n(e.currency)}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeString=r,t.isValidISODate=function(e){if(!e||"string"!=typeof e)return!1;let t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e},t.isValidCurrency=n,t.isValidMoney=i,t.formatMoney=function(e,t="en-US"){if(!i(e))return"Invalid";try{return new Intl.NumberFormat(t,{style:"currency",currency:e.currency}).format(e.value)}catch{return`${e.currency} ${e.value.toFixed(2)}`}},t.sanitizeTransactionMetadata=function(e){if(!e||"object"!=typeof e)return;let t={};for(let[n,i]of Object.entries(e)){let e=r(n);e&&("string"==typeof i?t[e]=r(i):"number"==typeof i||"boolean"==typeof i?t[e]=i:null===i&&(t[e]=null))}return t},t.validateTransactionId=function(e){return!!e&&"string"==typeof e&&e.length>0&&e.length<=255&&/^[a-zA-Z0-9_-]+$/.test(e)},t.maskPII=function(e,t="*"){return e&&"string"==typeof e?e=(e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,e=>{let[r,n]=e.split("@");return r&&n?`${r[0]}${t.repeat(Math.max(0,r.length-2))}@${n}`:e})).replace(/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,e=>`****-****-****-${e.slice(-4)}`):""},t.generateSecureId=function(e="id"){let t=new Uint8Array(16);if("undefined"!=typeof crypto&&crypto.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=Math.floor(256*Math.random());let r=Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("");return`${e}_${r}`},t.deepClone=function e(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array)return t.map(t=>e(t));if("object"==typeof t){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=e(t[n]));return r}return t}},69151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactSettlerMCPServer=void 0,t.createMCPServer=function(e){return new i(e)};let n=r(63979);class i{constructor(e){this.workflows=new Map,(0,n.requireFeature)(n.FEATURE_FLAGS.MCP_INTEGRATION,"MCP Server Integration"),this.config=e}registerWorkflow(e,t){this.workflows.set(e,t)}getServerInfo(){return this.config}listResources(){let e=[];return this.workflows.forEach((t,r)=>{e.push({uri:`settler://workflow/${r}`,name:t.metadata.name,description:t.metadata.description??void 0,mimeType:"application/json"})}),e}getResource(e){let t=e.match(/^settler:\/\/workflow\/(.+)$/);if(!t||!t[1])return null;let r=t[1];return this.workflows.get(r)||null}listTools(){return[{name:"compile_reconciliation_workflow",description:"Compile a React.Settler workflow to JSON configuration",inputSchema:{type:"object",properties:{workflowId:{type:"string",description:"ID of the workflow to compile"}},required:["workflowId"]}},{name:"validate_transaction",description:"Validate a reconciliation transaction",inputSchema:{type:"object",properties:{transaction:{type:"object",description:"Transaction object to validate"}},required:["transaction"]}},{name:"create_reconciliation_workflow",description:"Create a new reconciliation workflow configuration",inputSchema:{type:"object",properties:{name:{type:"string"},description:{type:"string"},rulesets:{type:"array"}},required:["name"]}}]}async callTool(e,t){switch(e){case"compile_reconciliation_workflow":return this.compileWorkflow(t.workflowId);case"validate_transaction":return this.validateTransaction(t.transaction);case"create_reconciliation_workflow":return this.createWorkflow(t);default:throw Error(`Unknown tool: ${e}`)}}compileWorkflow(e){let t=this.workflows.get(e);if(!t)throw Error(`Workflow not found: ${e}`);return t}validateTransaction(e){let t=[];return e.id||t.push("Transaction ID is required"),e.amount&&"number"==typeof e.amount.value||t.push("Valid amount is required"),e.currency||t.push("Currency is required"),{valid:0===t.length,errors:t}}createWorkflow(e){return{version:"1.0.0",metadata:{name:e.name,description:e.description,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},rulesets:e.rulesets||[],views:[],widgets:{}}}}t.ReactSettlerMCPServer=i},69039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShopifyApp=function({shop:e,transactions:t=[],exceptions:r=[],onAction:a}){let{hasAccess:d,UpgradePrompt:u}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.SHOPIFY_INTEGRATION);return d?(0,n.jsx)("div",{style:{padding:"1rem",maxWidth:"100%",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},"data-shopify-app":!0,"data-shop":e,children:(0,n.jsxs)(s.ReconciliationDashboard,{children:[(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.5rem"},children:"Payment Reconciliation"}),(0,n.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Shop: ",e]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,n.jsx)(c.MetricCard,{title:"Total Transactions",value:t.length,subtitle:"This period"}),(0,n.jsx)(c.MetricCard,{title:"Match Rate",value:`${Math.round((t.length-r.length)/Math.max(t.length,1)*100)}%`,subtitle:"Successfully matched",trend:"up"}),(0,n.jsx)(c.MetricCard,{title:"Exceptions",value:r.length,subtitle:"Requiring review",trend:r.length>0?"down":"neutral"})]}),t.length>0&&(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.75rem"},children:"Transactions"}),(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(o.TransactionTable,{transactions:t,onSelect:e=>a?.("transaction.selected",e)})})]}),r.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.75rem"},children:"Exceptions"}),(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(l.ExceptionTable,{exceptions:r,onResolve:e=>a?.("exception.resolved",e)})})]})]})}):(0,n.jsx)(u,{})},t.useShopifyAppBridge=function(){let[e,t]=a.default.useState(""),[r,n]=a.default.useState("");return a.default.useEffect(()=>{},[]),{shop:e,apiKey:r,setApiKey:n}};let n=r(73227),i=r(63979),a=function(e){return e&&e.__esModule?e:{default:e}}(r(23677)),s=r(6892),o=r(38069),l=r(7838),c=r(35217)},74145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StripeApp=function({accountId:e,transactions:t=[],exceptions:r=[],onExport:u}){let{hasAccess:p}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.STRIPE_INTEGRATION);return p?(0,n.jsx)("div",{style:{padding:"1.5rem",backgroundColor:"#fafafa",minHeight:"100vh"},"data-stripe-app":!0,"data-account-id":e,children:(0,n.jsxs)(a.ReconciliationDashboard,{children:[(0,n.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.75rem",fontWeight:600},children:"Reconciliation Dashboard"}),t.length>0&&(0,n.jsx)(c.ExportButton,{data:t,format:"csv",onExport:u})]}),(0,n.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Stripe Account: ",e]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,n.jsx)(l.MetricCard,{title:"Total Revenue",value:`$${t.reduce((e,t)=>e+t.amount.value,0).toFixed(2)}`,subtitle:"This period"}),(0,n.jsx)(l.MetricCard,{title:"Transactions",value:t.length,subtitle:"Processed"}),(0,n.jsx)(l.MetricCard,{title:"Match Rate",value:`${Math.round((t.length-r.length)/Math.max(t.length,1)*100)}%`,subtitle:"Successfully matched",trend:"up"}),(0,n.jsx)(l.MetricCard,{title:"Exceptions",value:r.length,subtitle:"Requiring review",trend:r.length>0?"down":"neutral"})]}),t.length>0&&(0,n.jsx)("div",{style:{marginBottom:"2rem"},children:(0,n.jsx)(s.TransactionTable,{transactions:t})}),r.length>0&&(0,n.jsx)("div",{children:(0,n.jsx)(o.ExceptionTable,{exceptions:r})})]})}):(0,n.jsx)(d.UpgradePrompt,{feature:i.FEATURE_FLAGS.STRIPE_INTEGRATION,featureName:"Stripe Integration"})};let n=r(73227),i=r(63979),a=r(6892),s=r(38069),o=r(7838),l=r(35217),c=r(20778),d=r(13357)},93856:(e,t)=>{"use strict";function r(e,t){let r={version:"1.0.0",metadata:{name:t?.name||"Reconciliation Workflow",...t?.description?{description:t.description}:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},rulesets:[],views:[],widgets:{}};return{version:r.version||"1.0.0",metadata:{name:r.metadata?.name||"Reconciliation Workflow",...r.metadata?.description?{description:r.metadata.description}:{},createdAt:r.metadata?.createdAt||new Date().toISOString(),updatedAt:r.metadata?.updatedAt||new Date().toISOString()},rulesets:r.rulesets||[],views:r.views||[],widgets:r.widgets||{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.compileToConfig=r,t.compileToJSON=function(e,t){let n=r(e,t);return t?.pretty?JSON.stringify(n,null,2):JSON.stringify(n)}},53091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0;let n=r(73227),i=r(23677);class a extends i.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t),this.props.telemetryProvider&&this.props.telemetryProvider.trackError({error:e,component:"ErrorBoundary",context:{componentStack:t.componentStack},timestamp:new Date().toISOString()})}render(){return this.state.hasError&&this.state.error?this.props.fallback?"function"==typeof this.props.fallback?this.props.fallback(this.state.error,this.state.errorInfo):this.props.fallback:(0,n.jsxs)("div",{style:{padding:"2rem",border:"1px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#fff5f5"},children:[(0,n.jsx)("h2",{style:{color:"#c53030",marginTop:0},children:"Something went wrong"}),(0,n.jsx)("p",{style:{color:"#742a2a"},children:this.state.error.message||"An unexpected error occurred"}),!1]}):this.props.children}}t.ErrorBoundary=a},7838:(e,t,r)=>{"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a=e(t),s=0;s<a.length;s++)"default"!==a[s]&&n(r,t,a[s]);return i(r,t),r}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionTable=void 0;let s=r(73227),o=a(r(23677)),l=r(27783),c=r(92477),d=r(32102);t.ExceptionTable=o.default.memo(function({exceptions:e,onResolve:t,className:r,showSeverity:n=!0,showCategory:i=!0}){let a=(0,c.useCompilationContext)(),{track:u}=(0,d.useTelemetry)("ExceptionTable"),p=(0,o.useMemo)(()=>e.map(e=>({...e,description:(0,l.sanitizeString)(e.description)})),[e]);return("config"===a.mode&&(a.config.widgets||(a.config.widgets={}),a.config.widgets["exception-table"]={id:"exception-table",type:"exception-table",props:{showSeverity:n,showCategory:i}}),"ui"===a.mode)?(0,s.jsx)("div",{className:r,"data-widget":"exception-table",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),i&&(0,s.jsx)("th",{children:"Category"}),n&&(0,s.jsx)("th",{children:"Severity"}),(0,s.jsx)("th",{children:"Description"}),(0,s.jsx)("th",{children:"Status"}),t&&(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:p.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.id}),i&&(0,s.jsx)("td",{children:e.category}),n&&(0,s.jsx)("td",{children:(0,s.jsx)("span",{"data-severity":e.severity,children:e.severity})}),(0,s.jsx)("td",{children:e.description}),(0,s.jsx)("td",{children:e.resolutionStatus}),t&&(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>{u("exception.resolved",{exceptionId:e.id}),t(e)},children:"Resolve"})})]},e.id))})]})}):null})},20778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportButton=function({data:e,filename:t="reconciliation-export",format:r="csv",onExport:d,className:u,disabled:p=!1}){let h=(0,a.useCompilationContext)(),{track:m}=(0,s.useTelemetry)("ExportButton"),{auditLog:f}=(0,o.useSecurity)(),g=(0,i.useCallback)(()=>{if(!p&&0!==e.length){m("export.started",{format:r,recordCount:e.length}),f("export.generated",`Export ${r}`,"success",{format:r,recordCount:e.length});try{"csv"===r?l(e,t):"json"===r?c(JSON.stringify(e,null,2),`${t}.json`,"application/json"):"xlsx"===r&&(console.warn("XLSX export requires xlsx library. Falling back to CSV."),l(e,t)),d?.(r,e),m("export.completed",{format:r,recordCount:e.length})}catch(e){m("export.failed",{format:r,error:e instanceof Error?e.message:"Unknown error"}),f("export.generated",`Export ${r}`,"failure",{format:r,error:e instanceof Error?e.message:"Unknown"})}}},[e,t,r,d,p,m,f]);return"config"===h.mode?(h.config.widgets||(h.config.widgets={}),h.config.widgets["export-button"]={id:"export-button",type:"filter-bar",props:{format:r}},null):(0,n.jsxs)("button",{onClick:g,disabled:p||0===e.length,className:u,"data-widget":"export-button",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:p?"#f3f4f6":"white",cursor:p?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:["Export ",r.toUpperCase()]})};let n=r(73227),i=r(23677),a=r(92477),s=r(32102),o=r(78043);function l(e,t){if(0===e.length)return;let r=Object.keys(e[0]),n=e.map(e=>r.map(t=>{let r=e[t];if(null==r)return"";let n=String(r).replace(/"/g,'""');return`"${n}"`}));c([r.map(e=>`"${e}"`).join(","),...n.map(e=>e.join(","))].join("\n"),`${t}.csv`,"text/csv")}function c(e,t,r){let n=new Blob([e],{type:r}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}},21976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBar=function({onFilterChange:e,className:t,showProviderFilter:r=!0,showStatusFilter:o=!0,showDateRangeFilter:l=!0,showAmountRangeFilter:c=!0}){let d=(0,a.useCompilationContext)(),{track:u}=(0,s.useTelemetry)("FilterBar"),[p,h]=(0,i.useState)({}),m=(0,i.useCallback)(t=>{h(t),u("filter.changed",{filters:t}),e?.(t)},[e,u]);return"config"===d.mode?(d.config.widgets||(d.config.widgets={}),d.config.widgets["filter-bar"]={id:"filter-bar",type:"filter-bar",props:{showProviderFilter:r,showStatusFilter:o,showDateRangeFilter:l,showAmountRangeFilter:c}},null):(0,n.jsx)("div",{className:t,"data-widget":"filter-bar",children:(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r&&(0,n.jsxs)("select",{value:p.provider?.[0]||"",onChange:e=>{let t=e.target.value?[e.target.value]:void 0;m({...p,provider:t??void 0})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"},children:[(0,n.jsx)("option",{value:"",children:"All Providers"}),(0,n.jsx)("option",{value:"stripe",children:"Stripe"}),(0,n.jsx)("option",{value:"paypal",children:"PayPal"}),(0,n.jsx)("option",{value:"square",children:"Square"})]}),o&&(0,n.jsxs)("select",{value:p.status?.[0]||"",onChange:e=>{let t=e.target.value?[e.target.value]:void 0;m({...p,status:t??void 0})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"},children:[(0,n.jsx)("option",{value:"",children:"All Statuses"}),(0,n.jsx)("option",{value:"pending",children:"Pending"}),(0,n.jsx)("option",{value:"succeeded",children:"Succeeded"}),(0,n.jsx)("option",{value:"failed",children:"Failed"})]}),l&&(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{type:"date",value:p.dateRange?.start||"",onChange:e=>{m({...p,dateRange:{...p.dateRange,start:e.target.value}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"}}),(0,n.jsx)("span",{children:"to"}),(0,n.jsx)("input",{type:"date",value:p.dateRange?.end||"",onChange:e=>{m({...p,dateRange:{...p.dateRange,end:e.target.value}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"}})]}),c&&(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{type:"number",placeholder:"Min",value:p.amountRange?.min||"",onChange:e=>{let t=e.target.value?parseFloat(e.target.value):void 0;m({...p,amountRange:{...p.amountRange,min:t??void 0}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}}),(0,n.jsx)("span",{children:"to"}),(0,n.jsx)("input",{type:"number",placeholder:"Max",value:p.amountRange?.max||"",onChange:e=>{let t=e.target.value?parseFloat(e.target.value):void 0;m({...p,amountRange:{...p.amountRange,max:t??void 0}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}})]}),(0,n.jsx)("button",{onClick:()=>{m({}),u("filter.cleared")},style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer"},children:"Clear Filters"})]})})};let n=r(73227),i=r(23677),a=r(92477),s=r(32102)},50837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatchRule=function({id:e,name:t,field:r,type:a,tolerance:s,priority:o,enabled:l=!0}){let c=(0,i.useCompilationContext)();if("config"===c.mode){c.config.rulesets&&0!==c.config.rulesets.length||(c.config.rulesets=[{id:"default-ruleset",name:"Default Rules",rules:[],priority:"exact-first"}]);let n=c.config.rulesets[c.config.rulesets.length-1];if(!n)return null;let i={id:e,name:t,field:r,type:a,...s?{tolerance:s}:{},...void 0!==o?{priority:o}:{},enabled:l};n.rules.push(i)}return"ui"===c.mode?(0,n.jsxs)("div",{"data-rule-id":e,"data-rule-field":r,"data-rule-type":a,children:[(0,n.jsx)("strong",{children:t}),(0,n.jsxs)("span",{children:["Field: ",r]}),(0,n.jsxs)("span",{children:["Type: ",a]}),s&&(0,n.jsxs)("span",{children:["Tolerance: ",JSON.stringify(s)]})]}):null};let n=r(73227),i=r(92477)},35217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricCard=function({title:e,value:t,subtitle:r,trend:a,className:s}){let o=(0,i.useCompilationContext)();if("config"===o.mode){let t=`metric-${e.toLowerCase().replace(/\s+/g,"-")}`;o.config.widgets||(o.config.widgets={}),o.config.widgets[t]={id:t,type:"metric-card",title:e,props:{subtitle:r,trend:a}}}return"ui"===o.mode?(0,n.jsx)("div",{className:s,"data-widget":"metric-card",children:(0,n.jsxs)("div",{"data-metric-title":e,children:[(0,n.jsx)("h3",{children:e}),(0,n.jsx)("div",{"data-metric-value":t,"data-trend":a,children:t}),r&&(0,n.jsx)("div",{"data-metric-subtitle":!0,children:r})]})}):null};let n=r(73227),i=r(92477)},5675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileDashboard=function({transactions:e,exceptions:t,onTransactionSelect:r,onExceptionResolve:u,className:p}){let{track:h}=(0,d.useTelemetry)("MobileDashboard"),[m,f]=(0,i.useState)("transactions"),[g,x]=(0,i.useState)(""),b=(0,i.useMemo)(()=>{if(!g)return e;let t=g.toLowerCase();return e.filter(e=>e.id.toLowerCase().includes(t)||e.provider.toLowerCase().includes(t)||e.providerTransactionId.toLowerCase().includes(t))},[e,g]);return(0,n.jsx)(a.ReconciliationDashboard,{...p?{className:p}:{},children:(0,n.jsxs)("div",{style:{padding:"1rem",maxWidth:"100%",backgroundColor:"#fff"},"data-mobile-dashboard":!0,children:[(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"0.5rem",color:"#111827"},children:"Reconciliation"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.75rem",overflowX:"auto",paddingBottom:"0.5rem",WebkitOverflowScrolling:"touch"},children:[(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Transactions",value:e.length,subtitle:"Total"})}),(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Match Rate",value:`${Math.round((e.length-t.length)/Math.max(e.length,1)*100)}%`,subtitle:"Success"})}),(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Exceptions",value:t.length,subtitle:"Review"})})]})]}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsx)(c.SearchBar,{onSearch:e=>{x(e),h("search.executed",{query:e,platform:"mobile"})},placeholder:"Search transactions...",debounceMs:300})}),(0,n.jsxs)("div",{style:{display:"flex",borderBottom:"2px solid #e5e7eb",marginBottom:"1rem"},role:"tablist","aria-label":"Dashboard tabs",children:[(0,n.jsxs)("button",{onClick:()=>{f("transactions"),h("tab.switched",{tab:"transactions"})},role:"tab","aria-selected":"transactions"===m,"aria-controls":"transactions-panel",style:{flex:1,padding:"0.75rem",border:"none",backgroundColor:"transparent",borderBottom:"transactions"===m?"2px solid #3b82f6":"none",color:"transactions"===m?"#3b82f6":"#6b7280",fontWeight:"transactions"===m?600:400,fontSize:"0.875rem",cursor:"pointer",touchAction:"manipulation"},children:["Transactions (",e.length,")"]}),(0,n.jsxs)("button",{onClick:()=>{f("exceptions"),h("tab.switched",{tab:"exceptions"})},role:"tab","aria-selected":"exceptions"===m,"aria-controls":"exceptions-panel",style:{flex:1,padding:"0.75rem",border:"none",backgroundColor:"transparent",borderBottom:"exceptions"===m?"2px solid #3b82f6":"none",color:"exceptions"===m?"#3b82f6":"#6b7280",fontWeight:"exceptions"===m?600:400,fontSize:"0.875rem",cursor:"pointer",touchAction:"manipulation"},children:["Exceptions (",t.length,")"]})]}),(0,n.jsx)("div",{role:"tabpanel",id:"transactions-panel","aria-hidden":"transactions"!==m,style:{display:"transactions"===m?"block":"none"},children:b.length>0?(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(s.TransactionTable,{transactions:b,...r?{onSelect:r}:{}})}):(0,n.jsx)("div",{style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:(0,n.jsx)("p",{children:"No transactions found"})})}),(0,n.jsx)("div",{role:"tabpanel",id:"exceptions-panel","aria-hidden":"exceptions"!==m,style:{display:"exceptions"===m?"block":"none"},children:t.length>0?(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(o.ExceptionTable,{exceptions:t,...u?{onResolve:u}:{}})}):(0,n.jsx)("div",{style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:(0,n.jsx)("p",{children:"No exceptions found"})})})]})})};let n=r(73227),i=r(23677),a=r(6892),s=r(38069),o=r(7838),l=r(35217),c=r(4193),d=r(32102)},6892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReconciliationDashboard=function({children:e,mode:t,config:r,className:a}){return(0,n.jsx)(i.CompilationProvider,{...t?{mode:t}:{},...r?{config:r}:{},children:(0,n.jsx)("div",{className:a,"data-reconciliation-dashboard":!0,children:e})})};let n=r(73227),i=r(92477)},77649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=function({id:e,name:t,priority:r="exact-first",conflictResolution:a="manual-review",children:s}){let o=(0,i.useCompilationContext)();return"config"===o.mode&&(o.config.rulesets||(o.config.rulesets=[]),o.config.rulesets.push({id:e,name:t,rules:[],priority:r,conflictResolution:a})),(0,n.jsx)(n.Fragment,{children:s})};let n=r(73227),i=r(92477)},4193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchBar=function({onSearch:e,placeholder:t="Search transactions...",className:r,debounceMs:o=300,searchFields:l=["id","providerTransactionId","referenceId"]}){let c=(0,a.useCompilationContext)(),{track:d}=(0,s.useTelemetry)("SearchBar"),[u,p]=(0,i.useState)(""),[h,m]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=setTimeout(()=>{m(u)},o);return()=>clearTimeout(e)},[u,o]),(0,i.useEffect)(()=>{h!==u&&(d("search.executed",{query:h,length:h.length}),e?.(h))},[h,e,d]);let f=(0,i.useCallback)(e=>{let t=e.target.value;p(t),d("search.changed",{query:t})},[d]),g=(0,i.useCallback)(()=>{p(""),m(""),d("search.cleared"),e?.("")},[e,d]);return"config"===c.mode?(c.config.widgets||(c.config.widgets={}),c.config.widgets["search-bar"]={id:"search-bar",type:"filter-bar",props:{placeholder:t,debounceMs:o,searchFields:l}},null):(0,n.jsxs)("div",{className:r,"data-widget":"search-bar",style:{position:"relative"},children:[(0,n.jsx)("input",{type:"text",value:u,onChange:f,placeholder:t,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"1rem"}}),u&&(0,n.jsx)("button",{onClick:g,style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem",color:"#6b7280"},"aria-label":"Clear search",children:"\xd7"})]})};let n=r(73227),i=r(23677),a=r(92477),s=r(32102)},38069:(e,t,r)=>{"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a=e(t),s=0;s<a.length;s++)"default"!==a[s]&&n(r,t,a[s]);return i(r,t),r}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionTable=void 0;let s=r(73227),o=a(r(23677)),l=r(92477),c=r(32102),d=r(27783);t.TransactionTable=o.default.memo(function({transactions:e,onSelect:t,className:r,showProvider:n=!0,showStatus:i=!0}){let a=(0,l.useCompilationContext)(),{track:u}=(0,c.useTelemetry)("TransactionTable"),p=(0,o.useMemo)(()=>e.map(e=>({...e,id:(0,d.sanitizeString)(e.id),provider:(0,d.sanitizeString)(e.provider),providerTransactionId:(0,d.sanitizeString)(e.providerTransactionId),...e.referenceId?{referenceId:(0,d.sanitizeString)(e.referenceId)}:{}})),[e]);return("config"===a.mode&&(a.config.widgets||(a.config.widgets={}),a.config.widgets["transaction-table"]={id:"transaction-table",type:"transaction-table",props:{showProvider:n,showStatus:i}}),"ui"===a.mode)?(0,s.jsxs)("div",{className:r,"data-widget":"transaction-table",children:[(0,s.jsx)("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:(0,s.jsxs)("table",{role:"table","aria-label":"Reconciliation transactions",style:{width:"100%",borderCollapse:"collapse"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"ID"}),n&&(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Provider"}),(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Amount"}),(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Currency"}),(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Date"}),i&&(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Status"})]})}),(0,s.jsx)("tbody",{children:p.map((e,r)=>(0,s.jsxs)("tr",{onClick:()=>{u("transaction.selected",{transactionId:e.id}),t?.(e)},onKeyDown:r=>{("Enter"===r.key||" "===r.key)&&(r.preventDefault(),u("transaction.selected",{transactionId:e.id}),t?.(e))},role:t?"button":"row",tabIndex:t?0:-1,"aria-label":`Transaction ${e.id}, ${e.amount.value} ${e.amount.currency}`,style:{cursor:t?"pointer":"default",backgroundColor:r%2==0?"white":"#f9fafb",borderBottom:"1px solid #e5e7eb",transition:"background-color 0.15s ease"},onMouseEnter:e=>{t&&(e.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=r%2==0?"white":"#f9fafb"},onFocus:e=>{t&&(e.currentTarget.style.outline="2px solid #3b82f6",e.currentTarget.style.outlineOffset="-2px")},onBlur:e=>{e.currentTarget.style.outline="none"},children:[(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.id}),n&&(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.provider}),(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.amount.value.toFixed(2)}),(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.currency}),(0,s.jsx)("td",{style:{padding:"0.75rem"},children:(0,s.jsx)("time",{dateTime:e.date,children:new Date(e.date).toLocaleDateString()})}),i&&(0,s.jsx)("td",{style:{padding:"0.75rem"},children:(0,s.jsx)("span",{role:"status","aria-label":`Status: ${e.status}`,children:e.status})})]},e.id))})]})}),0===p.length&&(0,s.jsx)("div",{role:"status","aria-live":"polite",style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:"No transactions found"})]}):null})},13357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpgradePrompt=function({feature:e,featureName:t,compact:r=!1,onUpgrade:a}){let s=()=>{a?a():window.open("https://settler.dev/pricing","_blank","noopener,noreferrer")};return r?(0,n.jsxs)("div",{style:{padding:"0.75rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"6px",fontSize:"0.875rem"},children:[(0,n.jsxs)("span",{style:{color:"#92400e"},children:[t||e," requires Settler Commercial."," "]}),(0,n.jsx)("button",{onClick:s,style:{backgroundColor:"transparent",border:"none",color:"#92400e",textDecoration:"underline",cursor:"pointer",fontWeight:600},children:"Upgrade â†’"})]}):(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",border:"2px dashed #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[(0,n.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83D\uDD12"}),(0,n.jsxs)("h3",{style:{marginTop:0,marginBottom:"0.5rem",color:"#111827"},children:[t||e," is a Commercial Feature"]}),(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem",maxWidth:"500px",margin:"0 auto 1.5rem"},children:(0,i.getUpgradeMessage)(e)}),(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,n.jsx)("button",{onClick:s,style:{padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontWeight:600,cursor:"pointer",fontSize:"1rem"},children:"View Pricing"}),(0,n.jsx)("a",{href:"https://settler.dev/docs/commercial-features",target:"_blank",rel:"noopener noreferrer",style:{padding:"0.75rem 1.5rem",backgroundColor:"white",color:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"6px",textDecoration:"none",fontWeight:600,fontSize:"1rem"},children:"Learn More"})]})]})};let n=r(73227),i=r(63979)},40358:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualizedTable=function({transactions:e,height:t=400,rowHeight:r=50,onSelect:o,className:l}){let c=(0,s.useCompilationContext)(),{hasAccess:d,UpgradePrompt:u}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.VIRTUALIZATION),[p,h]=(0,a.useState)(0);if(!d)return(0,n.jsx)(u,{});let m=(0,a.useMemo)(()=>{let n=Math.floor(p/r),i=Math.min(n+Math.ceil(t/r)+1,e.length);return{startIndex:n,endIndex:i}},[p,r,t,e.length]),f=(0,a.useMemo)(()=>e.slice(m.startIndex,m.endIndex),[e,m]),g=e.length*r,x=m.startIndex*r,b=(0,a.useCallback)(e=>{h(e.currentTarget.scrollTop)},[]);return"config"===c.mode?(c.config.widgets||(c.config.widgets={}),c.config.widgets["virtualized-table"]={id:"virtualized-table",type:"transaction-table",props:{height:t,rowHeight:r}},null):(0,n.jsx)("div",{className:l,"data-widget":"virtualized-table",style:{height:t,overflow:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},onScroll:b,children:(0,n.jsx)("div",{style:{height:g,position:"relative"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{style:{position:"sticky",top:0,backgroundColor:"#f9fafb",zIndex:10},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"ID"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Provider"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Amount"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Date"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Status"})]})}),(0,n.jsx)("tbody",{style:{transform:`translateY(${x}px)`},children:f.map((e,t)=>(0,n.jsxs)("tr",{onClick:()=>o?.(e),style:{cursor:o?"pointer":"default",backgroundColor:t%2==0?"white":"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.id}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.provider}),(0,n.jsxs)("td",{style:{padding:"0.75rem"},children:[e.amount.value.toFixed(2)," ",e.amount.currency]}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.date).toLocaleDateString()}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.status})]},e.id))})]})})})};let n=r(73227),i=r(63979),a=r(23677),s=r(92477)},92477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompilationProvider=function({mode:e="ui",config:t={},children:r}){let i={mode:e,config:t,widgetRegistry:new Map};return(0,n.jsx)(a.Provider,{value:i,children:r})},t.useCompilationContext=function(){return(0,i.useContext)(a)||{mode:"ui",config:{},widgetRegistry:new Map}};let n=r(73227),i=r(23677),a=(0,i.createContext)(null)},78043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAuditLogHandler=function(e){s=e},t.useSecurity=function(){let e=(0,a.useCompilationContext)().securityContext,t=(0,i.useCallback)((t,r,i,a)=>{if(!(0,n.hasFeature)(n.FEATURE_FLAGS.AUDIT_LOGGING)){console.warn("Audit logging requires Settler Commercial subscription");return}if(!s)return;let o={id:`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),event:t,...e?.userId?{userId:e.userId}:{},...e?.sessionId?{sessionId:e.sessionId}:{},...e?.ipAddress?{ipAddress:e.ipAddress}:{},...e?.userAgent?{userAgent:e.userAgent}:{},action:r,result:i,...a?{metadata:a}:{}};s(o)},[e]),r=(0,i.useCallback)(t=>!!e?.permissions&&e.permissions.includes(t),[e]),o=(0,i.useCallback)(t=>!!e?.roles&&e.roles.includes(t),[e]);return{securityContext:e,auditLog:t,hasPermission:r,hasRole:o}};let n=r(63979),i=r(23677),a=r(92477),s=null},32102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTelemetryProvider=function(e){a=e},t.setTelemetryConfig=function(e){s={...s,...e}},t.useTelemetry=function(e){(0,n.requireFeature)(n.FEATURE_FLAGS.TELEMETRY,"Telemetry");let t=(0,i.useRef)(Date.now()),r=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(s.enabled&&s.trackPerformance)return t.current=Date.now(),()=>{let r=Date.now()-t.current;e&&r>0&&d({renderTime:r},e)}},[e]);let l=(0,i.useCallback)((t,r)=>{if(!s.enabled||!a||Math.random()>(s.sampleRate||1))return;let n={id:`evt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),type:"component.interaction",name:t,...r?{properties:s.scrubPII?o(r):r}:{},...e?{context:{component:e}}:{}};a.track(n)},[e]),c=(0,i.useCallback)((t,r)=>{if(!s.enabled||!s.trackErrors||!a)return;let n={error:t,...e?{component:e}:{},...r?{context:s.scrubPII?o(r):r}:{},timestamp:new Date().toISOString()};a.trackError(n)},[e]),d=(0,i.useCallback)((t,r)=>{if(!s.enabled||!s.trackPerformance||!a)return;let n={id:`perf_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),type:"performance",name:"component.performance",measurements:t,...r||e?{context:{component:r||e}}:{}};a.track(n)},[e]),u=(0,i.useCallback)(()=>{r.current=Date.now()},[]),p=(0,i.useCallback)(t=>{if(null===r.current)return;let n=Date.now()-r.current;d({interactionLatency:n},e),l(t,{latency:n}),r.current=null},[e,l,d]);return{track:l,trackError:c,trackPerformance:d,startInteraction:u,endInteraction:p}};let n=r(63979),i=r(23677),a=null,s={enabled:!1,sampleRate:1,batchSize:10,flushInterval:5e3,trackPerformance:!0,trackErrors:!0,trackUsers:!1,scrubPII:!0};function o(e){if(!e)return;let t={},r=[/email/i,/phone/i,/ssn/i,/credit.?card/i,/card.?number/i,/cvv/i,/password/i,/token/i,/api.?key/i];for(let[n,i]of Object.entries(e))r.some(e=>e.test(n))&&"string"==typeof i?t[n]="[REDACTED]":t[n]=i;return t}},86934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useValidation=function(e){return{validateTransaction:(0,n.useMemo)(()=>t=>{let r=[];if((0,i.validateTransactionId)(t.id)||r.push({field:"id",code:"INVALID_ID",message:"Transaction ID is invalid"}),t.provider&&"string"==typeof t.provider?e?.transaction?.allowedProviders&&!e.transaction.allowedProviders.includes(t.provider)&&r.push({field:"provider",code:"INVALID_PROVIDER",message:`Provider must be one of: ${e.transaction.allowedProviders.join(", ")}`}):r.push({field:"provider",code:"REQUIRED_FIELD",message:"Provider is required"}),(0,i.isValidMoney)(t.amount)?(e?.transaction?.maxAmount&&t.amount.value>e.transaction.maxAmount&&r.push({field:"amount",code:"AMOUNT_TOO_LARGE",message:`Amount exceeds maximum of ${e.transaction.maxAmount}`}),e?.transaction?.minAmount&&t.amount.value<e.transaction.minAmount&&r.push({field:"amount",code:"AMOUNT_TOO_SMALL",message:`Amount is below minimum of ${e.transaction.minAmount}`})):r.push({field:"amount",code:"INVALID_AMOUNT",message:"Amount is invalid"}),(0,i.isValidCurrency)(t.currency)?e?.transaction?.allowedCurrencies&&!e.transaction.allowedCurrencies.includes(t.currency)&&r.push({field:"currency",code:"INVALID_CURRENCY",message:`Currency must be one of: ${e.transaction.allowedCurrencies.join(", ")}`}):r.push({field:"currency",code:"INVALID_CURRENCY",message:"Currency must be a valid ISO 4217 code"}),(0,i.isValidISODate)(t.date)){if(e?.transaction?.dateRange){let n=new Date(t.date);e.transaction.dateRange.min&&n<new Date(e.transaction.dateRange.min)&&r.push({field:"date",code:"DATE_TOO_EARLY",message:"Date is before minimum allowed date"}),e.transaction.dateRange.max&&n>new Date(e.transaction.dateRange.max)&&r.push({field:"date",code:"DATE_TOO_LATE",message:"Date is after maximum allowed date"})}}else r.push({field:"date",code:"INVALID_DATE",message:"Date must be a valid ISO 8601 date string"});let n=["pending","succeeded","failed","refunded","disputed"];return n.includes(t.status)||r.push({field:"status",code:"INVALID_STATUS",message:`Status must be one of: ${n.join(", ")}`}),t.metadata&&t.metadata,{valid:0===r.length,errors:r,warnings:[]}},[e]),validateSettlement:(0,n.useMemo)(()=>e=>{let t=[];return(0,i.validateTransactionId)(e.id)||t.push({field:"id",code:"INVALID_ID",message:"Settlement ID is invalid"}),(0,i.isValidMoney)(e.amount)||t.push({field:"amount",code:"INVALID_AMOUNT",message:"Amount is invalid"}),(0,i.isValidCurrency)(e.currency)||t.push({field:"currency",code:"INVALID_CURRENCY",message:"Currency must be a valid ISO 4217 code"}),(0,i.isValidISODate)(e.settlementDate)||t.push({field:"settlementDate",code:"INVALID_DATE",message:"Settlement date must be a valid ISO 8601 date string"}),{valid:0===t.length,errors:t,warnings:[]}},[e]),validateException:(0,n.useMemo)(()=>t=>{let r=[];if(t.id&&"string"==typeof t.id||r.push({field:"id",code:"REQUIRED_FIELD",message:"Exception ID is required"}),t.description&&"string"==typeof t.description){let n=e?.exception?.descriptionMaxLength||1e3;t.description.length>n&&r.push({field:"description",code:"DESCRIPTION_TOO_LONG",message:`Description exceeds maximum length of ${n} characters`})}else r.push({field:"description",code:"REQUIRED_FIELD",message:"Description is required"});return{valid:0===r.length,errors:r,warnings:[]}},[e])}};let n=r(23677),i=r(27783)},43095:(e,t,r)=>{"use strict";t.A1=t.m_=t.i9=t.Xc=t.yh=t.yg=void 0,t.Bo=void 0;var n=r(6892);Object.defineProperty(t,"yg",{enumerable:!0,get:function(){return n.ReconciliationDashboard}});var i=r(38069);Object.defineProperty(t,"yh",{enumerable:!0,get:function(){return i.TransactionTable}});var a=r(7838);Object.defineProperty(t,"Xc",{enumerable:!0,get:function(){return a.ExceptionTable}});var s=r(35217);Object.defineProperty(t,"i9",{enumerable:!0,get:function(){return s.MetricCard}});var o=r(77649);Object.defineProperty(t,"m_",{enumerable:!0,get:function(){return o.RuleSet}});var l=r(50837);Object.defineProperty(t,"A1",{enumerable:!0,get:function(){return l.MatchRule}}),r(53091),r(21976),r(4193),r(20778),r(40358),r(86934),r(32102),r(78043),r(92477),r(71502),r(65081),r(78543),r(42832),r(69151),r(69039),r(74145),r(5675),r(63979),r(13357);var c=r(93856);Object.defineProperty(t,"Bo",{enumerable:!0,get:function(){return c.compileToJSON}})},63979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FEATURE_FLAGS=void 0,t.setLicense=function(e){i=e,e.expiresAt&&new Date(e.expiresAt)<new Date&&(console.warn("License has expired. Falling back to OSS tier."),i={tier:"oss",features:new Set([t.FEATURE_FLAGS.CORE_PROTOCOL,t.FEATURE_FLAGS.BASIC_COMPONENTS])})},t.getLicense=function(){return i},t.hasFeature=a,t.hasTier=s,t.requireFeature=function(e,t){if(!a(e)){let r=t||e;throw Error(`${r} is a commercial feature. Upgrade to Settler Commercial to access this feature. Visit https://settler.dev/pricing to learn more.`)}},t.requireTier=function(e){if(!s(e))throw Error(`This feature requires ${{oss:"OSS",commercial:"Commercial",enterprise:"Enterprise"}[e]} tier. Visit https://settler.dev/pricing to upgrade.`)},t.getUpgradeMessage=o,t.useFeature=function(e){return a(e)},t.useFeatureGate=function(e,t){let r=a(e);return{hasAccess:r,UpgradePrompt:t?()=>r?null:(0,n.jsx)(n.Fragment,{children:t}):()=>r?null:(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",border:"2px dashed #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[(0,n.jsx)("h3",{style:{marginTop:0,color:"#111827"},children:"Upgrade Required"}),(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"1rem"},children:o(e)}),(0,n.jsx)("a",{href:"https://settler.dev/pricing",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"6px",fontWeight:600},children:"View Pricing"})]})}};let n=r(73227),i={tier:"oss",features:new Set(["core","basic-components","validation","security-basic"])};function a(e){return i.features.has(e)}function s(e){let t={oss:0,commercial:1,enterprise:2};return t[i.tier]>=t[e]}function o(e){return`Upgrade to Settler Commercial to unlock ${e}. Visit https://settler.dev/pricing`}t.FEATURE_FLAGS={CORE_PROTOCOL:"core",BASIC_COMPONENTS:"basic-components",VALIDATION:"validation",SECURITY_BASIC:"security-basic",MOBILE_BASIC:"mobile-basic",ACCESSIBILITY:"accessibility",MCP_INTEGRATION:"mcp-integration",SHOPIFY_INTEGRATION:"shopify-integration",STRIPE_INTEGRATION:"stripe-integration",WEBHOOK_MANAGER:"webhook-manager",ADVANCED_SECURITY:"advanced-security",AUDIT_LOGGING:"audit-logging",TELEMETRY:"telemetry",EXPORT_ADVANCED:"export-advanced",VIRTUALIZATION:"virtualization",PERFORMANCE_MONITORING:"performance-monitoring",CUSTOM_THEMES:"custom-themes",WHITE_LABEL:"white-label",SSO:"sso",RBAC:"rbac",CUSTOM_INTEGRATIONS:"custom-integrations",PRIORITY_SUPPORT:"priority-support",SLA:"sla",DEDICATED_INSTANCE:"dedicated-instance"}},71502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFilteredTransactions=function(e,t){return(0,n.useMemo)(()=>e.filter(e=>{if(t.provider&&t.provider.length>0&&!t.provider.includes(e.provider)||t.status&&t.status.length>0&&!t.status.includes(e.status))return!1;if(t.dateRange){let r=new Date(e.date);if(t.dateRange.start&&r<new Date(t.dateRange.start)||t.dateRange.end&&r>new Date(t.dateRange.end))return!1}if(t.amountRange&&(void 0!==t.amountRange.min&&e.amount.value<t.amountRange.min||void 0!==t.amountRange.max&&e.amount.value>t.amountRange.max))return!1;if(t.search){let r=t.search.toLowerCase();if(![e.id,e.providerTransactionId,e.referenceId,e.provider,e.status].filter(Boolean).join(" ").toLowerCase().includes(r))return!1}return!0}),[e,t])},t.useSortedTransactions=function(e,t,r="asc"){return(0,n.useMemo)(()=>t?[...e].sort((e,n)=>{let i=e[t],a=n[t];return null==i?1:null==a?-1:"string"==typeof i&&"string"==typeof a?"asc"===r?i.localeCompare(a):a.localeCompare(i):"number"==typeof i&&"number"==typeof a?"asc"===r?i-a:a-i:0}):e,[e,t,r])},t.useDebounce=function(e,t){let[r,i]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let r=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(r)}},[e,t]),r};let n=r(23677)},78543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useBreakpoint=function(e=i){let[t,r]=(0,n.useState)("xs");return(0,n.useEffect)(()=>{let t=()=>{let t=window.innerWidth;t>=e["2xl"]?r("2xl"):t>=e.xl?r("xl"):t>=e.lg?r("lg"):t>=e.md?r("md"):t>=e.sm?r("sm"):r("xs")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),t},t.useMediaQuery=a,t.useIsMobile=function(){return a("(max-width: 768px)")},t.useIsTablet=function(){return a("(min-width: 769px) and (max-width: 1023px)")},t.useIsDesktop=function(){return a("(min-width: 1024px)")},t.getResponsiveColumns=function(e){return({xs:1,sm:2,md:3,lg:4,xl:4,"2xl":5})[e]};let n=r(23677),i={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function a(e){let[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=window.matchMedia(e);r(t.matches);let n=e=>{r(e.matches)};return t.addEventListener("change",n),()=>t.removeEventListener("change",n)},[e]),t}},65081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMockTransaction=i,t.createMockSettlement=function(e){return{id:`st_${Math.random().toString(36).substr(2,9)}`,provider:"stripe",providerSettlementId:`set_${Math.random().toString(36).substr(2,9)}`,amount:{value:100,currency:"USD"},currency:"USD",settlementDate:new Date().toISOString(),status:"completed",...e}},t.createMockException=function(e){return{id:`exc_${Math.random().toString(36).substr(2,9)}`,category:"amount_mismatch",severity:"high",description:"Transaction amount does not match settlement",resolutionStatus:"open",createdAt:new Date().toISOString(),...e}},t.createMockTransactions=function(e){return Array.from({length:e},(e,t)=>i({id:`tx_${t}`,amount:{value:(t+1)*10,currency:"USD"}}))},t.TestWrapper=function({children:e,mode:t="ui",config:i={}}){let{CompilationProvider:a}=r(92477);return(0,n.jsx)(a,{mode:t,config:i,children:e})},t.waitFor=function(e){return new Promise(t=>setTimeout(t,e))},t.createMockTelemetryProvider=function(){let e=[],t=[];return{track:t=>{e.push(t)},trackError:e=>{t.push(e)},trackPerformance:()=>{},flush:async()=>{},setUser:()=>{},setContext:()=>{},getEvents:()=>e,getErrors:()=>t,clear:()=>{e.length=0,t.length=0}}};let n=r(73227);function i(e){return{id:`tx_${Math.random().toString(36).substr(2,9)}`,provider:"stripe",providerTransactionId:`ch_${Math.random().toString(36).substr(2,9)}`,amount:{value:100,currency:"USD"},currency:"USD",date:new Date().toISOString(),status:"succeeded",...e}}},42832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookManager=void 0,t.createWebhookManager=s,t.createShopifyWebhookAdapter=function(e){let t=s(e);return{handleShopifyWebhook:async e=>{let r={"orders/create":"transaction.created","orders/paid":"transaction.updated","payouts/create":"settlement.created"}[e.event]||"transaction.created";await t.emit(r,e.data)},manager:t}},t.createStripeWebhookAdapter=function(e){let t=s(e);return{handleStripeWebhook:async e=>{let r={"charge.succeeded":"transaction.created","charge.refunded":"transaction.updated","payout.paid":"settlement.created"}[e.type]||"transaction.created";await t.emit(r,e.data.object)},manager:t}};let n=r(27783),i=r(63979);class a{constructor(e){this.handlers=new Map,(0,i.requireFeature)(i.FEATURE_FLAGS.WEBHOOK_MANAGER,"Webhook Manager"),this.secret=e||(0,n.generateSecureId)("webhook")}on(e,t){return this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),()=>{let r=this.handlers.get(e);if(r){let e=r.indexOf(t);e>-1&&r.splice(e,1)}}}async emit(e,t){let r=this.handlers.get(e)||[],i={id:(0,n.generateSecureId)("wh"),event:e,timestamp:new Date().toISOString(),data:this.sanitizeData(t)};this.secret&&(i.signature=await this.signPayload(i)),await Promise.all(r.map(e=>e(i)))}async verifySignature(e,t){return!!this.secret&&t===await this.signPayload(e)}sanitizeData(e){if("string"==typeof e)return(0,n.sanitizeString)(e);if(Array.isArray(e))return e.map(e=>this.sanitizeData(e));if(e&&"object"==typeof e){let t={};for(let[r,i]of Object.entries(e))t[(0,n.sanitizeString)(r)]=this.sanitizeData(i);return t}return e}async signPayload(e){let t=`${e.id}:${e.event}:${e.timestamp}`,r=new TextEncoder().encode(t+this.secret);return"undefined"!=typeof crypto&&crypto.subtle?Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join(""):btoa(t+this.secret).substring(0,64)}}function s(e){return new a(e)}t.WebhookManager=a},51078:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q,dynamic:()=>W});var n=r(73227),i=r(23677),a=r(43095),s=r(1133),o=r(66144),l=r(18660),c=r(18552),d=r(78495),u=r(31998),p=r(78508),h=r(99124),m=r(12515),f=class extends u.l{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,p.O)(),this.bindMethods(),this.setOptions(t)}#e;#n=void 0;#i=void 0;#a=void 0;#s;#o;#r;#t;#l;#c;#d;#u;#p;#h;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#n.addObserver(this),g(this.#n,this.options)?this.#f():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return x(this.#n,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return x(this.#n,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#n.removeObserver(this)}setOptions(e){let t=this.options,r=this.#n;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,h.Nc)(this.options.enabled,this.#n))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#y(),this.#n.setOptions(this.options),t._defaulted&&!(0,h.VS)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#n,observer:this});let n=this.hasListeners();n&&b(this.#n,r,this.options,t)&&this.#f(),this.updateResult(),n&&(this.#n!==r||(0,h.Nc)(this.options.enabled,this.#n)!==(0,h.Nc)(t.enabled,this.#n)||(0,h.KC)(this.options.staleTime,this.#n)!==(0,h.KC)(t.staleTime,this.#n))&&this.#v();let i=this.#j();n&&(this.#n!==r||(0,h.Nc)(this.options.enabled,this.#n)!==(0,h.Nc)(t.enabled,this.#n)||i!==this.#h)&&this.#w(i)}getOptimisticResult(e){let t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return(0,h.VS)(this.getCurrentResult(),r)||(this.#a=r,this.#o=this.options,this.#s=this.#n.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"!==r||(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#r.status||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#n}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#f(e){this.#y();let t=this.#n.fetch(this.options,e);return e?.throwOnError||(t=t.catch(h.ZT)),t}#v(){this.#x();let e=(0,h.KC)(this.options.staleTime,this.#n);if(h.sk||this.#a.isStale||!(0,h.PN)(e))return;let t=(0,h.Kp)(this.#a.dataUpdatedAt,e);this.#u=m.mr.setTimeout(()=>{this.#a.isStale||this.updateResult()},t+1)}#j(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#n):this.options.refetchInterval)??!1}#w(e){this.#b(),this.#h=e,!h.sk&&!1!==(0,h.Nc)(this.options.enabled,this.#n)&&(0,h.PN)(this.#h)&&0!==this.#h&&(this.#p=m.mr.setInterval(()=>{(this.options.refetchIntervalInBackground||l.j.isFocused())&&this.#f()},this.#h))}#g(){this.#v(),this.#w(this.#j())}#x(){this.#u&&(m.mr.clearTimeout(this.#u),this.#u=void 0)}#b(){this.#p&&(m.mr.clearInterval(this.#p),this.#p=void 0)}createResult(e,t){let r;let n=this.#n,i=this.options,a=this.#a,s=this.#s,o=this.#o,l=e!==n?e.state:this.#i,{state:c}=e,u={...c},m=!1;if(t._optimisticResults){let r=this.hasListeners(),a=!r&&g(e,t),s=r&&b(e,n,t,i);(a||s)&&(u={...u,...(0,d.z)(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:f,errorUpdatedAt:x,status:v}=u;r=u.data;let j=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===v){let e;a?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(e=a.data,j=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,void 0!==e&&(v="success",r=(0,h.oE)(a?.data,e,t),m=!0)}if(t.select&&void 0!==r&&!j){if(a&&r===s?.data&&t.select===this.#l)r=this.#c;else try{this.#l=t.select,r=t.select(r),r=(0,h.oE)(a?.data,r,t),this.#c=r,this.#t=null}catch(e){this.#t=e}}this.#t&&(f=this.#t,r=this.#c,x=Date.now(),v="error");let w="fetching"===u.fetchStatus,S="pending"===v,R="error"===v,C=S&&w,I=void 0!==r,k={status:v,fetchStatus:u.fetchStatus,isPending:S,isSuccess:"success"===v,isError:R,isInitialLoading:C,isLoading:C,data:r,dataUpdatedAt:u.dataUpdatedAt,error:f,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!S,isLoadingError:R&&!I,isPaused:"paused"===u.fetchStatus,isPlaceholderData:m,isRefetchError:R&&I,isStale:y(e,t),refetch:this.refetch,promise:this.#r,isEnabled:!1!==(0,h.Nc)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===k.status?e.reject(k.error):void 0!==k.data&&e.resolve(k.data)},r=()=>{t(this.#r=k.promise=(0,p.O)())},i=this.#r;switch(i.status){case"pending":e.queryHash===n.queryHash&&t(i);break;case"fulfilled":("error"===k.status||k.data!==i.value)&&r();break;case"rejected":("error"!==k.status||k.error!==i.reason)&&r()}}return k}updateResult(){let e=this.#a,t=this.createResult(this.#n,this.options);this.#s=this.#n.state,this.#o=this.options,void 0!==this.#s.data&&(this.#d=this.#n),(0,h.VS)(t,e)||(this.#a=t,this.#S({listeners:(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#m.size)return!0;let n=new Set(r??this.#m);return this.options.throwOnError&&n.add("error"),Object.keys(this.#a).some(t=>this.#a[t]!==e[t]&&n.has(t))})()}))}#y(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#n)return;let t=this.#n;this.#n=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#S(e){c.Vr.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#n,type:"observerResultsUpdated"})})}};function g(e,t){return!1!==(0,h.Nc)(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)||void 0!==e.state.data&&x(e,t,t.refetchOnMount)}function x(e,t,r){if(!1!==(0,h.Nc)(t.enabled,e)&&"static"!==(0,h.KC)(t.staleTime,e)){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&y(e,t)}return!1}function b(e,t,r,n){return(e!==t||!1===(0,h.Nc)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&y(e,r)}function y(e,t){return!1!==(0,h.Nc)(t.enabled,e)&&e.isStaleByTime((0,h.KC)(t.staleTime,e))}var v=r(14455),j=i.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),w=()=>i.useContext(j),S=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&!t.isReset()&&(e.retryOnMount=!1)},R=e=>{i.useEffect(()=>{e.clearReset()},[e])},C=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||(0,h.L3)(r,[e.error,n])),I=i.createContext(!1),k=()=>i.useContext(I);I.Provider;var T=e=>{if(e.suspense){let t=e=>"static"===e?e:Math.max(e??1e3,1e3),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>t(r(...e)):t(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}},O=(e,t)=>e.isLoading&&e.isFetching&&!t,E=(e,t)=>e?.suspense&&t.isPending,_=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});let A={jobs:{all:["jobs"],list:e=>["jobs","list",e],detail:e=>["jobs",e],execution:e=>["jobs",e,"execution"]}};var M=r(12923);async function P(e,t){let r=new M.SettlerClient({apiKey:e});return(await r.jobs.list({limit:t?.limit||10})).data||[]}var D=r(24583);let N=(0,D.Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var F=r(93126),L=r(73195);function U({query:e,children:t,loadingComponent:r,errorComponent:i,emptyComponent:a,isEmpty:s,showRefetching:o=!1}){let{data:l,isLoading:c,isError:d,error:u,isFetching:p}=e;return c||o&&p&&!l?r||(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(N,{className:"w-8 h-8 animate-spin text-blue-600 dark:text-electric-cyan mb-4"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]}):d?i?.(u)||(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(F.Z,{className:"w-8 h-8 text-red-600 dark:text-red-400 mb-4"}),n.jsx("p",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:"Error loading data"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:u instanceof Error?u.message:"An unexpected error occurred"})]}):void 0!==l&&s&&s(l)?a||(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(L.Z,{className:"w-8 h-8 text-slate-400 dark:text-slate-500 mb-4"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No data available"})]}):void 0!==l?(0,n.jsxs)(n.Fragment,{children:[o&&p&&n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx(N,{className:"w-4 h-4 animate-spin text-blue-600 dark:text-electric-cyan"})}),t(l)]}):null}var B=r(72578);let $=(0,D.Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var V=r(11250),z=r(18755);function Q({error:e,title:t="Error loading data",onRetry:r,showRetry:i=!0,retryText:a="Try Again",showSupport:s=!1,supportAction:o,size:l="default",className:c}){let d=(()=>{if(!e)return"An unexpected error occurred";if(e instanceof Error){let t=e.message;return t.includes("NetworkError")||t.includes("Failed to fetch")?"Network error. Please check your connection and try again.":t.includes("404")||t.includes("Not Found")?"The requested resource was not found.":t.includes("401")||t.includes("Unauthorized")?"You are not authorized to access this resource.":t.includes("403")||t.includes("Forbidden")?"Access forbidden.":t.includes("500")||t.includes("Server Error")?"Server error. Please try again later.":t.length>200?"An unexpected error occurred":t}return"string"==typeof e?e.length>200?"An unexpected error occurred":e:"An unexpected error occurred"})(),u={sm:{container:"py-8",icon:"w-10 h-10",title:"text-base",description:"text-sm"},default:{container:"py-12",icon:"w-12 h-12",title:"text-lg",description:"text-base"},lg:{container:"py-16",icon:"w-16 h-16",title:"text-xl",description:"text-lg"}}[l];return(0,n.jsxs)("div",{className:(0,z.cn)("flex flex-col items-center justify-center px-4",u.container,c),role:"alert","aria-live":"assertive",children:[n.jsx(F.Z,{className:(0,z.cn)("text-destructive mb-4",u.icon,"motion-safe:animate-fade-in"),"aria-hidden":"true"}),n.jsx("lg"===l?"h2":"sm"===l?"h4":"h3",{className:(0,z.cn)("font-semibold text-foreground mb-2 text-center",u.title),children:t}),n.jsx("p",{className:(0,z.cn)("text-muted-foreground text-center mb-6 max-w-md mx-auto",u.description),children:d}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 items-center",children:[i&&r&&(0,n.jsxs)(V.z,{onClick:r,variant:"default",size:"sm"===l?"sm":"default","aria-label":a,children:[n.jsx(B.Z,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),a]}),s&&o&&(0,n.jsxs)(V.z,{onClick:o,variant:"outline",size:"sm"===l?"sm":"default","aria-label":"Contact Support",children:[n.jsx($,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Contact Support"]})]})]})}let W="force-dynamic";function q(){let[e]=(0,i.useState)(()=>""),t=function({apiKey:e,limit:t=10,enabled:r=!0}){return function(e,t,r){let n=k(),a=w(),s=(0,v.NL)(r),o=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",T(o),S(o,a),R(a);let l=!s.getQueryCache().get(o.queryHash),[d]=i.useState(()=>new t(s,o)),u=d.getOptimisticResult(o),p=!n&&!1!==e.subscribed;if(i.useSyncExternalStore(i.useCallback(e=>{let t=p?d.subscribe(c.Vr.batchCalls(e)):h.ZT;return d.updateResult(),t},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),i.useEffect(()=>{d.setOptions(o)},[o,d]),E(o,u))throw _(o,d,a);if(C({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if(s.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!h.sk&&O(u,n)){let e=l?_(o,d,a):s.getQueryCache().get(o.queryHash)?.promise;e?.catch(h.ZT).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?u:d.trackResult(u)}({queryKey:A.jobs.list({limit:t}),queryFn:()=>P(e,{limit:t}),enabled:r&&!!e,staleTime:1e4},f,void 0)}({apiKey:e,limit:10,enabled:!!e}),r=(0,i.useMemo)(()=>t.data?t.data.map((e,t)=>{let r=e.source&&"object"==typeof e.source&&"adapter"in e.source?String(e.source.adapter):"stripe";return{id:`tx-${e.id}`,provider:r,providerTransactionId:`ch_${e.id.slice(0,10)}`,amount:{value:100*(t+1),currency:"USD"},currency:"USD",date:e.createdAt||new Date().toISOString(),status:"succeeded",referenceId:e.name}}):[],[t.data]),l=(0,i.useMemo)(()=>[{id:"exc-1",category:"amount_mismatch",severity:"high",description:"Transaction amount does not match settlement",resolutionStatus:"open",createdAt:new Date().toISOString()}],[]),d=(0,i.useMemo)(()=>{let e=n.jsx(a.yg,{children:(0,n.jsxs)(a.m_,{id:"demo-rules",name:"Demo Rules",priority:"exact-first",children:[n.jsx(a.A1,{id:"rule-1",name:"Exact Amount Match",field:"amount",type:"exact",priority:1}),n.jsx(a.A1,{id:"rule-2",name:"Date Range Match",field:"date",type:"range",tolerance:{days:7},priority:2})]})});return(0,a.Bo)(e,{name:"Settler Dashboard Demo",description:"Demo reconciliation workflow",pretty:!0})},[]);return e?(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-black",children:[n.jsx(s.Navigation,{}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pt-24",children:[(0,n.jsxs)("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2 text-slate-900 dark:text-white",children:"React.Settler Demo"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"This page demonstrates the @settler/react-settler component library integrated into the Settler dashboard."})]}),n.jsx(U,{query:t,isEmpty:e=>!e||0===e.length,errorComponent:e=>n.jsx(Q,{error:e,title:"Failed to load reconciliation data",onRetry:()=>t.refetch()}),emptyComponent:n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No reconciliation jobs found."})}),children:e=>e?(0,n.jsxs)(a.yg,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsx(a.i9,{title:"Total Transactions",value:r.length,subtitle:"Reconciliation transactions"}),n.jsx(a.i9,{title:"Match Rate",value:"95%",subtitle:"19 of 20 matched",trend:"up"}),n.jsx(a.i9,{title:"Exceptions",value:l.length,subtitle:"Requiring review",trend:"neutral"})]}),(0,n.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow mb-6 border border-slate-200 dark:border-slate-700",children:[n.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:n.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Transactions"})}),n.jsx("div",{className:"p-6",children:n.jsx(a.yh,{transactions:r,onSelect:e=>{console.log("Selected transaction:",e),alert(`Selected transaction: ${e.id}`)}})})]}),(0,n.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow mb-6 border border-slate-200 dark:border-slate-700",children:[n.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:n.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Exceptions"})}),n.jsx("div",{className:"p-6",children:n.jsx(a.Xc,{exceptions:l,onResolve:e=>{console.log("Resolving exception:",e),alert(`Resolving exception: ${e.id}`)}})})]}),(0,n.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow border border-slate-200 dark:border-slate-700",children:[(0,n.jsxs)("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Compiled Configuration"}),n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"JSON config extracted from React component tree"})]}),n.jsx("div",{className:"p-6",children:n.jsx("pre",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded overflow-auto text-sm text-slate-900 dark:text-slate-100",children:d})})]})]}):null})]}),n.jsx(o.$,{})]}):(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-black",children:[n.jsx(s.Navigation,{}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pt-24",children:n.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,n.jsxs)("p",{className:"text-yellow-800 dark:text-yellow-300",children:["Please provide an API key via the ",n.jsx("code",{className:"bg-yellow-100 dark:bg-yellow-900/40 px-2 py-1 rounded",children:"?apiKey=..."})," query parameter."]})})}),n.jsx(o.$,{})]})}},96050:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,dynamic:()=>i});var n=r(53189);let i=(0,n.createProxy)(String.raw`/workspace/packages/web/src/app/react-settler-demo/page.tsx#dynamic`),a=(0,n.createProxy)(String.raw`/workspace/packages/web/src/app/react-settler-demo/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[522,631,568,10,56,923],()=>r(91360));module.exports=n})();